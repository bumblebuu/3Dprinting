extends layout

block content
  .container
    .row
      h1.mb-5 Basket
    .row
      .col-md-10.offset-md-1
        if basket.length!==0
          table.table
            thead 
              tr
                th productname
                th quantity
                th price
                th &nbsp;
            tbody
              each basketItem in basket
                tr
                  td=basketItem.product.name
                  td
                    button.btn.btn-danger.btn-sm(onClick=`quantityChanged('${user._id}','${basketItem.product._id}','minus')`) -
                    input.quantity(name='quantity', type='number', value=basketItem.quantity, readonly)
                    button.btn.btn-success.btn-sm(onClick=`quantityChanged('${user._id}','${basketItem.product._id}','plus')`) +
                  td=basketItem.price
                  td
                    form(action=`/basket/removeItem/${basketItem._id}`, method='delete')
                      button.btn.btn-danger(type='submit') &#128465;
          hr
          .row
            .col-6.col-md-8
              strong.total Total: $ #{total}
            .col-6.col-md-4.text-center
              form(action=`/basket/removeAll/${user._id}`, method='delete')
                button.mb-2.btn.btn-danger(type='submit') Empty basket
          .text-center
            a.mt-3.mb-3.btn.btn-lg.btn-success(href='/pay/checkout') Pay    
        else
          .col-md-6.offset-md-3.text-center
            a(href='/products', style='text-decoration: inherit;')
              img(style='width:100%' src='/img/empty_cart.jpg')
              h6.text-dark Your basket is empty. Start shoppig!
  
  script(src="/js/basket.js")